# https://moonrepo.dev/docs/config/project
$schema: 'https://moonrepo.dev/schemas/project.json'

language: 'typescript'
type: 'application'
platform: 'node'

dependsOn:
  - 'shared'

tags:
  - 'frontend'
  - 'web'
  - 'react'

tasks:
  dev:
    command: 'vite'
    local: true
    options:
      persistent: true
      cache: false
      envFile: '.env'
      outputStyle: 'stream'
      runDepsInParallel: false

  build:
    command: 'vite build'
    inputs:
      - 'src/**/*.ts'
      - 'src/**/*.tsx'
      - 'tsconfig.json'
      - 'vite.config.ts'
    outputs:
      - 'dist'
    deps:
      - 'shared:build'

  serve:
    command: 'vite preview --host'
    deps:
      - '~:build'
    options:
      persistent: true
      cache: false

  check-types:
    deps:
      - 'shared:build'

  lint:
    deps:
      - 'shared:build'

workspace:
  inheritedTasks:
    exclude:
      - 'dev'

// Template for adding a new service to the DI system
// Replace 'MyService' and 'my-feature' with your actual service name

// ==== Step 1: Add to tokens.ts ====

// 1a. Add type import at the top:
import type { MyService } from '@~/features/my-feature/my-feature.service';

// 1b. Add token constant (around line 10-20):
const myServiceToken: unique symbol = Symbol.for('MyService');

// 1c. Add to TOKENS object (around line 25):
export const TOKENS = {
  // ... existing entries ...
  MyService: myServiceToken,
} as const;

// 1d. Add to iTokenRegistry interface (around line 35):
export interface iTokenRegistry {
  // ... existing entries ...
  [TOKENS.MyService]: MyService;
}


// ==== Step 2: Register in container.ts ====

export async function registerServices() {
  // 2a. Add dynamic import:
  const { MyService } = await import('@~/features/my-feature/my-feature.service');
  
  // 2b. Register service (choose one):
  
  // For singleton (same instance every time):
  container.registerSingleton(TOKENS.MyService, MyService);
  
  // OR for transient (new instance each time):
  container.register(TOKENS.MyService, { useClass: MyService }, { lifecycle: Lifecycle.Transient });
}


// ==== Step 3: Use the service ====

// GETTERS is automatically updated - no manual step needed!

import { GETTERS } from '@~/routers/di-getter';

// In your router handler:
const myService = GETTERS.MyService();
const result = await myService.doSomething();

// OR use resolve directly:
import { resolve } from '@~/di';
import { TOKENS } from '@~/di/tokens';

const myService = resolve(TOKENS.MyService);
